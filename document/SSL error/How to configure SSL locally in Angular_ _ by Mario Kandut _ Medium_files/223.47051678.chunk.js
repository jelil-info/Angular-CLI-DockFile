(self.webpackChunklite=self.webpackChunklite||[]).push([[223],{61279:(e,n,t)=>{"use strict";t.d(n,{DI:()=>O,nj:()=>L,oT:()=>B});var r=t(59713),i=t.n(r),l=t(63038),s=t.n(l),o=t(28655),u=t.n(o),a=t(82492),c=t.n(a),d=t(92471),b=t(21919),w=t(67294),f=t(25735),v=t(9354),p=t(75880),m=t(18627),g=t(66411),x=t(78285);function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function V(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){i()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function y(){var e=u()(["\n  mutation fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe($userId: ID!) {\n    fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe(userId: $userId) {\n      __typename\n      ...useNewsletterV3Subscription_newsletterV3\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function h(){var e=u()(["\n  mutation unsubscribeNewsletterV3($newsletterV3Id: ID!) {\n    unsubscribeNewsletterV3(newsletterV3Id: $newsletterV3Id)\n  }\n"]);return h=function(){return e},e}function E(){var e=u()(["\n  mutation subscribeNewsletterV3($newsletterV3Id: ID!, $shouldRecordConsent: Boolean) {\n    subscribeNewsletterV3(\n      newsletterV3Id: $newsletterV3Id\n      shouldRecordConsent: $shouldRecordConsent\n    )\n  }\n"]);return E=function(){return e},e}function C(){var e=u()(["\n  fragment useNewsletterV3Subscription_newsletterV3_viewerEdge on NewsletterV3 {\n    viewerEdge {\n      id\n      isSubscribed\n    }\n  }\n"]);return C=function(){return e},e}function I(){var e=u()(["\n  fragment useNewsletterV3Subscription_user on User {\n    id\n    username\n    newsletterV3 {\n      ...useNewsletterV3Subscription_newsletterV3\n    }\n  }\n  ","\n"]);return I=function(){return e},e}function N(){var e=u()(["\n  fragment useNewsletterV3Subscription_newsletterV3 on NewsletterV3 {\n    id\n    type\n    slug\n    name\n    collection {\n      slug\n    }\n    user {\n      id\n      name\n      username\n      newsletterV3 {\n        id\n      }\n    }\n  }\n"]);return N=function(){return e},e}var O=(0,d.Ps)(N()),L=(0,d.Ps)(I(),O),P=((0,d.Ps)(C()),(0,d.Ps)(E())),D=(0,d.Ps)(h()),k=(0,d.Ps)(y(),O),B=function(e){var n=e.newsletterV3,t=e.creator,r=e.newsletterName,i=e.hideLinkInConfirmationToast,l=void 0!==i&&i,o=n||{},u=o.id,a=o.type,d=o.slug,S=o.collection,y=(null==n?void 0:n.user)||t,h=null!=r?r:null==n?void 0:n.name,E=w.useState(!1),C=s()(E,2),I=C[0],N=C[1],O=(0,v.T)({newsletterSlug:d,collectionSlug:null==S?void 0:S.slug,username:null==y?void 0:y.username}),B=O.viewerEdge,T=O.loading,j=(0,f.VB)({name:"enable_auto_follow_on_subscribe",placeholder:!1}),R=w.useState(!1),$=s()(R,2),_=$[0],A=$[1];w.useEffect((function(){A(!(null==B||!B.isSubscribed))}),[null==B?void 0:B.isSubscribed]);var z=(0,m.Av)(),M=(0,g.Qi)(),F=(0,x.w)();I&&z.event("newsletterV3.subscribe.error",{newsletterV3Id:u});var U=function(e,n,t){if(t){var r={id:"User:".concat(null==y?void 0:y.id),fragment:L,fragmentName:"useNewsletterV3Subscription_user"},i=e.readFragment(r);e.writeFragment(V(V({},r),{},{data:V(V({},i),{},{newsletterV3:t})}))}if(B){var l=e.readQuery({query:v.p,variables:{newsletterSlug:d,collectionSlug:null==S?void 0:S.slug,username:null==y?void 0:y.username}}),s=c()({},l,{newsletterV3:{viewerEdge:{isSubscribed:n}}});e.writeQuery({query:v.p,variables:{newsletterSlug:d||"",collectionSlug:null==S?void 0:S.slug,username:null==y?void 0:y.username},data:s})}n&&null!=y&&y.id&&j&&(0,p.I0)(e,y.id,{isFollowing:!0})},G=(0,b.D)(P,{onCompleted:function(e){var n=e.subscribeNewsletterV3;N(!n),n&&(z.event("newsletterV3.subscribeClicked",{newsletterV3Id:u,source:M}),A(!0))},update:function(e){U(e,!0)}}),Q=s()(G,1)[0],q=(0,b.D)(D,{onCompleted:function(e){var n=e.unsubscribeNewsletterV3;N(!n),n&&(A(!1),F({duration:l?5e3:"NEXTPAGE",toastStyle:"NEWSLETTER_UNSUBSCRIBE",extraParams:{newsletterName:h||null,newsletterType:a||null,unsubscribeFn:function(){return A(!1)},hideEmailSettingsLink:l,hideCloseButton:l}}))},update:function(e){U(e,!1)}}),W=s()(q,1)[0],X=(0,b.D)(k,{onCompleted:function(e){var n=e.fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe;N(!n),n&&(z.event("newsletterV3.subscribeClicked",{newsletterV3Id:n.id,source:M}),A(!0))},update:function(e,n){var t,r=V({},null===(t=n.data)||void 0===t?void 0:t.fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe);U(e,!0,r)}}),H=s()(X,1)[0];return{isSubscribed:_,hasError:I,setSubscribe:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];N(!1),e&&!n&&null!=t&&t.id?H({variables:{userId:null==t?void 0:t.id}}):e&&null!=n&&n.id?Q({variables:{newsletterV3Id:null==n?void 0:n.id,shouldRecordConsent:r}}):null!=n&&n.id?W({variables:{newsletterV3Id:null==n?void 0:n.id}}):N(!0)},loading:T}}},9354:(e,n,t)=>{"use strict";t.d(n,{T:()=>u,p:()=>a});var r=t(28655),i=t.n(r),l=t(64718),s=t(92471);function o(){var e=i()(["\n  query NewsletterV3ViewerEdge($newsletterSlug: ID!, $collectionSlug: ID, $username: ID) {\n    newsletterV3(\n      newsletterSlug: $newsletterSlug\n      collectionSlug: $collectionSlug\n      username: $username\n    ) {\n      ... on NewsletterV3 {\n        id\n        viewerEdge {\n          id\n          isSubscribed\n        }\n      }\n    }\n  }\n"]);return o=function(){return e},e}var u=function(e){var n,t=e.newsletterSlug,r=void 0===t?"":t,i=e.collectionSlug,s=e.username,o=(0,l.a)(a,{variables:{newsletterSlug:r,collectionSlug:i,username:s},ssr:!1,skip:!r&&!s}),u=o.loading,c=o.error,d=o.data;return u?{loading:u}:c?{error:c}:{viewerEdge:null==d||null===(n=d.newsletterV3)||void 0===n?void 0:n.viewerEdge}},a=(0,s.Ps)(o())},13791:(e,n,t)=>{"use strict";t.d(n,{v:()=>b});var r=t(63038),i=t.n(r),l=t(67294),s=t(47230),o=t(91583),u=t(77355),a=t(9935),c=t(87691),d=t(14804),b=function(e){var n=e.ariaLabelledBy,t=e.buttonStyle,r=void 0===t?"STRONG":t,b=e.buttonSize,w=void 0===b?"REGULAR":b,f=e.cancelText,v=void 0===f?"Cancel":f,p=e.children,m=e.confirmText,g=e.footer,x=void 0===g?null:g,S=e.hide,V=e.isVisible,y=e.noPortal,h=e.isResponse,E=void 0!==h&&h,C=e.onConfirm,I=e.showCancelButton,N=void 0===I||I,O=e.withCloseButton,L=void 0===O||O,P=e.isDestructiveAction,D=e.disableConfirm,k=void 0!==D&&D,B=e.hideOnConfirm,T=void 0===B||B,j=e.secondaryButton,R=e.customBackgroundColor,$=e.hrefConfirm,_=e.childrenAlign,A=void 0===_?"center":_,z=e.actionsAlign,M=void 0===z?"center":z,F=e.footerAlign,U=void 0===F?"center":F,G=l.useState(0),Q=i()(G,2),q=Q[0],W=Q[1];l.useEffect((function(){q||W(window.innerWidth)}),[]);var X=l.useCallback((function(e){C&&C(e),T&&(null==S||S())}),[C,S,T]),H=!j&&N?l.createElement(s.z,{buttonStyle:"SUBTLE",size:w,onClick:S},v):j;return l.createElement(o.V,{ariaLabelledBy:n,isVisible:V,hide:S,noPortal:y,withCloseButton:!1,customBackgroundColor:(0,d.l9)(.94),isResponse:E},l.createElement(u.x,{position:"relative"},l.createElement(u.x,{background:E?"none":R||"white",borderRadius:"4px",display:"flex",flexDirection:"column",alignItems:"center",minHeight:"550px",width:E?"100%":"900px",justifyContent:"space-between",boxShadow:E?"none":"rgba(0, 0, 0, 0.15) 0px 2px 10px",padding:E?"0px":"18px",md:{display:"flex",justifyContent:"center",width:"720px"},sm:{width:"540px"},xs:{width:q<=320?"272px":"320px"}},l.createElement(u.x,{alignItems:"center",display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"center",md:{display:"flex",width:"100%"},padding:E?"0px":"44px 56px",sm:{padding:"32px 7px"},maxWidth:"680px"},l.createElement(u.x,{display:"flex",flexDirection:"column",alignItems:A},p,l.createElement(u.x,{display:"flex",justifyContent:M,width:"100%"},H,m&&l.createElement(u.x,{paddingLeft:H?"8px":void 0,display:"inline-block"},l.createElement(s.z,{buttonStyle:P?"ERROR":r,size:w,onClick:X,disabled:k,href:$},m))),x?l.createElement(u.x,{paddingTop:"48px",textAlign:U,width:"100%"},l.createElement(c.F,{scale:"M",tag:"span"},x)):null))),L&&l.createElement(a.P,{onClick:S,size:"LARGE",absoluteOffset:"18px"})))}},1383:(e,n,t)=>{"use strict";t.d(n,{Q:()=>b});var r=t(67154),i=t.n(r),l=t(6479),s=t.n(l),o=t(67294),u=t(77355),a=t(20113),c=t(87691),d=t(13791),b=function(e){var n=e.children,t=e.titleText,r=s()(e,["children","titleText"]),l="confirmDialogTitle";return o.createElement(d.v,i()({},r,{ariaLabelledBy:l}),o.createElement(a.X6,{ariaLabelledById:l,scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"}},t),o.createElement(u.x,{paddingTop:"6px",paddingBottom:"36px"},o.createElement(c.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},tag:"div"},n)))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/223.47051678.chunk.js.map